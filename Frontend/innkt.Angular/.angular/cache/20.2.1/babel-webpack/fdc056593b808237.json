{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/user.service\";\nimport * as i4 from \"../../services/posts.service\";\nimport * as i5 from \"@angular/material/snack-bar\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/tabs\";\nimport * as i11 from \"@ngx-translate/core\";\nfunction ProfileComponent_div_0_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_0_div_34_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.followUser());\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"person_add\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 1, \"PROFILE.FOLLOW\"), \" \");\n  }\n}\nfunction ProfileComponent_div_0_mat_card_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 23)(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-card-content\")(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const post_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(post_r3.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 3, post_r3.createdAt, \"medium\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(post_r3.content);\n  }\n}\nfunction ProfileComponent_div_0_mat_card_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 24)(1, \"div\", 25);\n    i0.ɵɵelement(2, \"img\", 26);\n    i0.ɵɵelementStart(3, \"div\", 27)(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const follower_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", follower_r4.profilePicture || \"assets/default-avatar.jpg\", i0.ɵɵsanitizeUrl)(\"alt\", follower_r4.firstName + \" \" + follower_r4.lastName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", follower_r4.firstName, \" \", follower_r4.lastName);\n  }\n}\nfunction ProfileComponent_div_0_mat_card_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 24)(1, \"div\", 25);\n    i0.ɵɵelement(2, \"img\", 26);\n    i0.ɵɵelementStart(3, \"div\", 27)(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const followingUser_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", followingUser_r5.profilePicture || \"assets/default-avatar.jpg\", i0.ɵɵsanitizeUrl)(\"alt\", followingUser_r5.firstName + \" \" + followingUser_r5.lastName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", followingUser_r5.firstName, \" \", followingUser_r5.lastName);\n  }\n}\nfunction ProfileComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"mat-card\", 3)(3, \"div\", 4)(4, \"div\", 5);\n    i0.ɵɵelement(5, \"img\", 6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-card-content\", 7)(7, \"h1\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 8);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 9);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵpipe(14, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 10)(16, \"div\", 11)(17, \"span\", 12);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\", 13);\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 11)(23, \"span\", 12);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"span\", 13);\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 11)(29, \"span\", 12);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"span\", 13);\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(34, ProfileComponent_div_0_div_34_Template, 6, 3, \"div\", 14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"div\", 15)(36, \"mat-tab-group\")(37, \"mat-tab\", 16);\n    i0.ɵɵpipe(38, \"translate\");\n    i0.ɵɵelementStart(39, \"div\", 17);\n    i0.ɵɵtemplate(40, ProfileComponent_div_0_mat_card_40_Template, 10, 6, \"mat-card\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(41, \"mat-tab\", 16);\n    i0.ɵɵpipe(42, \"translate\");\n    i0.ɵɵelementStart(43, \"div\", 19);\n    i0.ɵɵtemplate(44, ProfileComponent_div_0_mat_card_44_Template, 6, 4, \"mat-card\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(45, \"mat-tab\", 16);\n    i0.ɵɵpipe(46, \"translate\");\n    i0.ɵɵelementStart(47, \"div\", 19);\n    i0.ɵɵtemplate(48, ProfileComponent_div_0_mat_card_48_Template, 6, 4, \"mat-card\", 20);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"src\", ctx_r1.user.profilePicture, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r1.user.firstName + \" \" + ctx_r1.user.lastName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.user.firstName, \" \", ctx_r1.user.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.user.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(13, 20, \"PROFILE.JOINED\"), \" \", i0.ɵɵpipeBind2(14, 22, ctx_r1.user.createdAt, \"longDate\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.posts.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 25, \"PROFILE.POSTS\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.followers.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(27, 27, \"PROFILE.FOLLOWERS\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.following.length);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(33, 29, \"PROFILE.FOLLOWING\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isOwnProfile);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"label\", i0.ɵɵpipeBind1(38, 31, \"PROFILE.POSTS\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.posts);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"label\", i0.ɵɵpipeBind1(42, 33, \"PROFILE.FOLLOWERS\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.followers);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"label\", i0.ɵɵpipeBind1(46, 35, \"PROFILE.FOLLOWING\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.following);\n  }\n}\nexport let ProfileComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ProfileComponent {\n    constructor(route, authService, userService, postsService, snackBar) {\n      this.route = route;\n      this.authService = authService;\n      this.userService = userService;\n      this.postsService = postsService;\n      this.snackBar = snackBar;\n      this.userId = '';\n      this.user = null;\n      this.isOwnProfile = false;\n      this.posts = [];\n      this.followers = [];\n      this.following = [];\n      this.userStats = null;\n      this.loading = false;\n      this.isFollowing = false;\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        this.userId = params['id'];\n        this.loadProfile();\n        this.loadPosts();\n        this.loadFollowers();\n        this.loadFollowing();\n        this.checkFollowStatus();\n      });\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    loadProfile() {\n      this.loading = true;\n      this.userService.getUserProfile(this.userId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: user => {\n          this.user = user;\n          this.isOwnProfile = this.userId === this.authService.getCurrentUser()?.id;\n          this.loadUserStats();\n        },\n        error: error => {\n          console.error('Error loading profile:', error);\n          this.snackBar.open('Error loading profile', 'Close', {\n            duration: 3000\n          });\n        }\n      });\n    }\n    loadUserStats() {\n      this.userService.getUserStats(this.userId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: stats => {\n          this.userStats = stats;\n        },\n        error: error => {\n          console.error('Error loading user stats:', error);\n        }\n      });\n    }\n    loadPosts() {\n      this.postsService.getUserPosts(this.userId, 0, 10).pipe(takeUntil(this.destroy$)).subscribe({\n        next: response => {\n          this.posts = response.posts;\n        },\n        error: error => {\n          console.error('Error loading posts:', error);\n          this.snackBar.open('Error loading posts', 'Close', {\n            duration: 3000\n          });\n        }\n      });\n    }\n    loadFollowers() {\n      this.userService.getUserFollowers(this.userId, 0, 20).pipe(takeUntil(this.destroy$)).subscribe({\n        next: response => {\n          this.followers = response.users;\n        },\n        error: error => {\n          console.error('Error loading followers:', error);\n        }\n      });\n    }\n    loadFollowing() {\n      this.userService.getUserFollowing(this.userId, 0, 20).pipe(takeUntil(this.destroy$)).subscribe({\n        next: response => {\n          this.following = response.users;\n        },\n        error: error => {\n          console.error('Error loading following:', error);\n        }\n      });\n    }\n    checkFollowStatus() {\n      if (!this.isOwnProfile && this.authService.getCurrentUser()) {\n        const currentUserId = this.authService.getCurrentUser().id;\n        this.userService.isFollowing(currentUserId, this.userId).pipe(takeUntil(this.destroy$)).subscribe({\n          next: isFollowing => {\n            this.isFollowing = isFollowing;\n          },\n          error: error => {\n            console.error('Error checking follow status:', error);\n          }\n        });\n      }\n    }\n    followUser() {\n      if (!this.authService.getCurrentUser()) {\n        this.snackBar.open('Please log in to follow users', 'Close', {\n          duration: 3000\n        });\n        return;\n      }\n      const currentUserId = this.authService.getCurrentUser().id;\n      this.userService.followUser(currentUserId, this.userId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.isFollowing = true;\n          this.snackBar.open('Successfully followed user!', 'Close', {\n            duration: 2000\n          });\n          this.loadFollowers(); // Refresh followers count\n        },\n        error: error => {\n          console.error('Error following user:', error);\n          this.snackBar.open('Error following user', 'Close', {\n            duration: 3000\n          });\n        }\n      });\n    }\n    unfollowUser() {\n      if (!this.authService.getCurrentUser()) {\n        this.snackBar.open('Please log in to unfollow users', 'Close', {\n          duration: 3000\n        });\n        return;\n      }\n      const currentUserId = this.authService.getCurrentUser().id;\n      this.userService.unfollowUser(currentUserId, this.userId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.isFollowing = false;\n          this.snackBar.open('Successfully unfollowed user!', 'Close', {\n            duration: 2000\n          });\n          this.loadFollowers(); // Refresh followers count\n        },\n        error: error => {\n          console.error('Error unfollowing user:', error);\n          this.snackBar.open('Error unfollowing user', 'Close', {\n            duration: 3000\n          });\n        }\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function ProfileComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ProfileComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.PostsService), i0.ɵɵdirectiveInject(i5.MatSnackBar));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ProfileComponent,\n      selectors: [[\"app-profile\"]],\n      decls: 1,\n      vars: 1,\n      consts: [[\"class\", \"profile-container\", 4, \"ngIf\"], [1, \"profile-container\"], [1, \"profile-header\"], [1, \"profile-card\"], [1, \"profile-cover\"], [1, \"profile-avatar\"], [3, \"src\", \"alt\"], [1, \"profile-info\"], [1, \"profile-email\"], [1, \"profile-joined\"], [1, \"profile-stats\"], [1, \"stat\"], [1, \"stat-number\"], [1, \"stat-label\"], [\"class\", \"profile-actions\", 4, \"ngIf\"], [1, \"profile-content\"], [3, \"label\"], [1, \"posts-grid\"], [\"class\", \"post-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"users-list\"], [\"class\", \"user-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"profile-actions\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"post-card\"], [1, \"user-card\"], [1, \"user-info\"], [1, \"user-avatar\", 3, \"src\", \"alt\"], [1, \"user-details\"]],\n      template: function ProfileComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, ProfileComponent_div_0_Template, 49, 37, \"div\", 0);\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"ngIf\", ctx.user);\n        }\n      },\n      dependencies: [CommonModule, i6.NgForOf, i6.NgIf, MatCardModule, i7.MatCard, i7.MatCardContent, i7.MatCardHeader, i7.MatCardSubtitle, i7.MatCardTitle, MatButtonModule, i8.MatButton, MatIconModule, i9.MatIcon, MatTabsModule, i10.MatTab, i10.MatTabGroup, MatChipsModule, MatProgressSpinnerModule, TranslateModule, i6.DatePipe, i11.TranslatePipe],\n      styles: [\".profile-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.profile-header[_ngcontent-%COMP%]{margin-bottom:32px}.profile-card[_ngcontent-%COMP%]{border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #0000001a}.profile-cover[_ngcontent-%COMP%]{height:200px;background:linear-gradient(135deg,#667eea,#764ba2);position:relative}.profile-avatar[_ngcontent-%COMP%]{position:absolute;bottom:-50px;left:50%;transform:translate(-50%)}.profile-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:4px solid white;box-shadow:0 4px 16px #0003}.profile-info[_ngcontent-%COMP%]{padding:60px 24px 24px;text-align:center}.profile-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#333;margin:0 0 8px}.profile-info[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{color:#666;margin:0 0 8px}.profile-info[_ngcontent-%COMP%]   .profile-joined[_ngcontent-%COMP%]{color:#999;font-size:.9rem;margin:0 0 24px}.profile-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:32px;margin-bottom:24px}.profile-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{text-align:center}.profile-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#667eea}.profile-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:1rem;font-weight:500}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.profile-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-header{border-bottom:1px solid #e0e0e0}.posts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;padding:24px 0}.post-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.users-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;padding:24px 0}.user-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 16px #0000001a}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin-right:12px}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:#333}[dir=rtl][_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{left:auto;right:50%;transform:translate(50%)}[dir=rtl][_ngcontent-%COMP%]   .profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}[dir=rtl][_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{margin-right:0;margin-left:12px}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:16px}.profile-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.profile-stats[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.posts-grid[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}\"]\n    }));\n  }\n  _staticBlock();\n  return ProfileComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}