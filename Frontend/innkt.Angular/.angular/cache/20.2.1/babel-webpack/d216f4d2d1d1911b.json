{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RouterModule } from '@angular/router';\nimport { Subject, takeUntil } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/posts.service\";\nimport * as i2 from \"../../../services/auth.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/chips\";\nimport * as i9 from \"@angular/material/paginator\";\nimport * as i10 from \"@angular/material/progress-spinner\";\nimport * as i11 from \"@angular/router\";\nimport * as i12 from \"@ngx-translate/core\";\nconst _c0 = () => [5, 10, 25, 50];\nfunction PostListComponent_div_10_mat_card_1_mat_chip_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", tag_r3, \" \");\n  }\n}\nfunction PostListComponent_div_10_mat_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 8)(1, \"mat-card-header\")(2, \"div\", 9);\n    i0.ɵɵelement(3, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-title\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-card-subtitle\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"mat-card-content\")(11, \"p\", 11);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 12);\n    i0.ɵɵtemplate(14, PostListComponent_div_10_mat_card_1_mat_chip_14_Template, 2, 1, \"mat-chip\", 13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"mat-card-actions\")(16, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function PostListComponent_div_10_mat_card_1_Template_button_click_16_listener() {\n      const post_r4 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.onLikePost(post_r4.id));\n    });\n    i0.ɵɵelementStart(17, \"mat-icon\");\n    i0.ɵɵtext(18, \"favorite_border\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function PostListComponent_div_10_mat_card_1_Template_button_click_20_listener() {\n      const post_r4 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.commentPost(post_r4.id));\n    });\n    i0.ɵɵelementStart(21, \"mat-icon\");\n    i0.ɵɵtext(22, \"comment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function PostListComponent_div_10_mat_card_1_Template_button_click_24_listener() {\n      const post_r4 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.sharePost(post_r4.id));\n    });\n    i0.ɵɵelementStart(25, \"mat-icon\");\n    i0.ɵɵtext(26, \"share\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27);\n    i0.ɵɵpipe(28, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const post_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", post_r4.author.avatar || \"assets/default-avatar.jpg\", i0.ɵɵsanitizeUrl)(\"alt\", post_r4.author.firstName + \" \" + post_r4.author.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(post_r4.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\" \", i0.ɵɵpipeBind1(8, 12, \"POSTS.BY\"), \" \", post_r4.author.firstName, \" \", post_r4.author.lastName, \" \\u2022 \", i0.ɵɵpipeBind2(9, 14, post_r4.createdAt, \"medium\"), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(post_r4.content);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", post_r4.tags);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", post_r4.likes, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", post_r4.comments, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(28, 17, \"POSTS.SHARE\"), \" \");\n  }\n}\nfunction PostListComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, PostListComponent_div_10_mat_card_1_Template, 29, 19, \"mat-card\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.posts);\n  }\n}\nfunction PostListComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, \"POSTS.LOADING\"));\n  }\n}\nexport let PostListComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class PostListComponent {\n    constructor(postsService, authService, snackBar) {\n      this.postsService = postsService;\n      this.authService = authService;\n      this.snackBar = snackBar;\n      this.posts = [];\n      this.loading = false;\n      this.pageSize = 10;\n      this.currentPage = 0;\n      this.totalPosts = 0;\n      this.currentUser = this.authService.getCurrentUser();\n      this.filters = {};\n      this.destroy$ = new Subject();\n    }\n    ngOnInit() {\n      this.loadPosts();\n      // Subscribe to posts updates\n      this.postsService.posts$.pipe(takeUntil(this.destroy$)).subscribe(posts => {\n        this.posts = posts;\n      });\n    }\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    loadPosts() {\n      this.loading = true;\n      this.postsService.getPosts(this.currentPage, this.pageSize, this.filters).pipe(takeUntil(this.destroy$)).subscribe({\n        next: response => {\n          this.totalPosts = response.totalCount;\n          this.loading = false;\n        },\n        error: error => {\n          console.error('Error loading posts:', error);\n          this.loading = false;\n          this.snackBar.open('Error loading posts', 'Close', {\n            duration: 3000\n          });\n        }\n      });\n    }\n    onPageChange(event) {\n      this.currentPage = event.pageIndex;\n      this.pageSize = event.pageSize;\n      this.loadPosts();\n    }\n    onLikePost(postId) {\n      this.postsService.toggleLike(postId).pipe(takeUntil(this.destroy$)).subscribe({\n        next: () => {\n          this.snackBar.open('Post liked!', 'Close', {\n            duration: 2000\n          });\n        },\n        error: error => {\n          console.error('Error liking post:', error);\n          this.snackBar.open('Error liking post', 'Close', {\n            duration: 3000\n          });\n        }\n      });\n    }\n    onDeletePost(postId) {\n      if (confirm('Are you sure you want to delete this post?')) {\n        this.postsService.deletePost(postId).pipe(takeUntil(this.destroy$)).subscribe({\n          next: () => {\n            this.snackBar.open('Post deleted successfully', 'Close', {\n              duration: 3000\n            });\n          },\n          error: error => {\n            console.error('Error deleting post:', error);\n            this.snackBar.open('Error deleting post', 'Close', {\n              duration: 3000\n            });\n          }\n        });\n      }\n    }\n    applyFilters(newFilters) {\n      this.filters = {\n        ...this.filters,\n        ...newFilters\n      };\n      this.currentPage = 0;\n      this.loadPosts();\n    }\n    commentPost(postId) {\n      // TODO: Implement comment logic\n      console.log('Commenting on post:', postId);\n    }\n    sharePost(postId) {\n      // TODO: Implement share logic\n      console.log('Sharing post:', postId);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function PostListComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PostListComponent)(i0.ɵɵdirectiveInject(i1.PostsService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PostListComponent,\n      selectors: [[\"app-post-list\"]],\n      decls: 14,\n      vars: 13,\n      consts: [[\"loadingTemplate\", \"\"], [1, \"post-list-container\"], [1, \"post-list-header\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"routerLink\", \"/posts/create\"], [\"class\", \"posts-container\", 4, \"ngIf\", \"ngIfElse\"], [\"showFirstLastButtons\", \"\", 3, \"page\", \"length\", \"pageSize\", \"pageIndex\", \"pageSizeOptions\"], [1, \"posts-container\"], [\"class\", \"post-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"post-card\"], [\"mat-card-avatar\", \"\", 1, \"author-avatar\"], [3, \"src\", \"alt\"], [1, \"post-content\"], [1, \"post-tags\"], [\"class\", \"tag-chip\", 4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", 3, \"click\"], [1, \"tag-chip\"], [1, \"loading-container\"]],\n      template: function PostListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h1\");\n          i0.ɵɵtext(3);\n          i0.ɵɵpipe(4, \"translate\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"button\", 3)(6, \"mat-icon\");\n          i0.ɵɵtext(7, \"add\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(8);\n          i0.ɵɵpipe(9, \"translate\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(10, PostListComponent_div_10_Template, 2, 1, \"div\", 4)(11, PostListComponent_ng_template_11_Template, 5, 3, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementStart(13, \"mat-paginator\", 5);\n          i0.ɵɵlistener(\"page\", function PostListComponent_Template_mat_paginator_page_13_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onPageChange($event));\n          });\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const loadingTemplate_r6 = i0.ɵɵreference(12);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 8, \"POSTS.TITLE\"));\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(9, 10, \"POSTS.CREATE_NEW\"), \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading)(\"ngIfElse\", loadingTemplate_r6);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"length\", ctx.totalPosts)(\"pageSize\", ctx.pageSize)(\"pageIndex\", ctx.currentPage)(\"pageSizeOptions\", i0.ɵɵpureFunction0(12, _c0));\n        }\n      },\n      dependencies: [CommonModule, i4.NgForOf, i4.NgIf, MatCardModule, i5.MatCard, i5.MatCardActions, i5.MatCardAvatar, i5.MatCardContent, i5.MatCardHeader, i5.MatCardSubtitle, i5.MatCardTitle, MatButtonModule, i6.MatButton, MatIconModule, i7.MatIcon, MatChipsModule, i8.MatChip, MatPaginatorModule, i9.MatPaginator, MatProgressSpinnerModule, i10.MatProgressSpinner, TranslateModule, RouterModule, i11.RouterLink, i4.DatePipe, i12.TranslatePipe],\n      styles: [\".post-list-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.post-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px}.post-list-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#333;margin:0}.post-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:1rem;font-weight:500}.post-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.posts-container[_ngcontent-%COMP%]{margin-bottom:32px}.post-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.author-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.post-content[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;color:#333;margin:16px 0}.post-tags[_ngcontent-%COMP%]{margin:16px 0}.post-tags[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:8px;background-color:#f0f0f0;color:#666}mat-card-actions[_ngcontent-%COMP%]{padding:16px;display:flex;gap:16px}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#666}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#667eea}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666;font-size:1rem}[dir=rtl][_ngcontent-%COMP%]   .post-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}[dir=rtl][_ngcontent-%COMP%]   .post-tags[_ngcontent-%COMP%]   .tag-chip[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}[dir=rtl][_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}@media (max-width: 768px){.post-list-container[_ngcontent-%COMP%]{padding:16px}.post-list-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.post-list-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}mat-card-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}}\"]\n    }));\n  }\n  _staticBlock();\n  return PostListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}