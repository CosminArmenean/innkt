<mat-toolbar class="navbar" color="primary">
  <div class="navbar-container">
    <!-- Logo/Brand -->
    <div class="navbar-brand">
      <a routerLink="/" class="brand-link">
        <i class="fas fa-users"></i>
        <span class="brand-text">Innkt</span>
      </a>
    </div>

    <!-- Navigation Links -->
    <nav class="navbar-nav" *ngIf="isAuthenticated">
      <a routerLink="/dashboard" routerLinkActive="active" class="nav-link">
        <i class="fas fa-home"></i>
        <span>{{ 'NAV.DASHBOARD' | translate }}</span>
      </a>
      <a routerLink="/posts" routerLinkActive="active" class="nav-link">
        <i class="fas fa-newspaper"></i>
        <span>{{ 'NAV.POSTS' | translate }}</span>
      </a>
      <a routerLink="/posts/create" routerLinkActive="active" class="nav-link">
        <i class="fas fa-plus"></i>
        <span>{{ 'NAV.CREATE_POST' | translate }}</span>
      </a>
      <a [routerLink]="['/profile', currentUser?.id]" routerLinkActive="active" class="nav-link">
        <i class="fas fa-user"></i>
        <span>{{ 'NAV.PROFILE' | translate }}</span>
      </a>
    </nav>

    <!-- Right Side Controls -->
    <div class="navbar-controls">
      <!-- Language Selector -->
      <mat-form-field class="language-selector" appearance="outline">
        <mat-select 
          [value]="currentLanguage" 
          (selectionChange)="onLanguageChange($event.value)"
          class="language-select">
          <mat-option 
            *ngFor="let language of supportedLanguages" 
            [value]="language.code"
            class="language-option">
            {{ getLanguageDisplayName(language) }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Theme Toggle -->
      <button 
        mat-icon-button 
        (click)="toggleTheme()" 
        class="theme-toggle"
        [matTooltip]="'NAV.TOGGLE_THEME' | translate">
        <i class="fas" [class.fa-sun]="currentTheme === 'light'" [class.fa-moon]="currentTheme === 'dark'"></i>
      </button>

      <!-- User Menu -->
      <div class="user-section" *ngIf="isAuthenticated; else authButtons">
        <button 
          mat-button 
          [matMenuTriggerFor]="userMenu" 
          class="user-menu-trigger">
          <img 
            [src]="currentUser?.profilePicture || 'assets/images/default-avatar.png'" 
            [alt]="currentUser?.displayName || 'User'"
            class="user-avatar">
          <span class="user-name">{{ currentUser?.displayName || 'User' }}</span>
          <i class="fas fa-chevron-down"></i>
        </button>
        
        <mat-menu #userMenu="matMenu" class="user-menu">
          <button mat-menu-item routerLink="/profile/settings">
            <i class="fas fa-cog"></i>
            <span>{{ 'NAV.SETTINGS' | translate }}</span>
          </button>
          <button mat-menu-item (click)="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>{{ 'NAV.LOGOUT' | translate }}</span>
          </button>
        </mat-menu>
      </div>

      <!-- Authentication Buttons -->
      <ng-template #authButtons>
        <div class="auth-buttons">
          <a routerLink="/login" class="btn btn-outline">
            <i class="fas fa-sign-in-alt"></i>
            <span>{{ 'NAV.LOGIN' | translate }}</span>
          </a>
          <a routerLink="/register" class="btn btn-primary">
            <i class="fas fa-user-plus"></i>
            <span>{{ 'NAV.REGISTER' | translate }}</span>
          </a>
        </div>
      </ng-template>
    </div>
  </div>
</mat-toolbar>
