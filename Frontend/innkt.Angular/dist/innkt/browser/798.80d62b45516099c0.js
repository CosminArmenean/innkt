"use strict";(self.webpackChunkinnkt=self.webpackChunkinnkt||[]).push([[798],{798:(b,M,d)=>{d.r(M),d.d(M,{DashboardComponent:()=>N});var m=d(2200),p=d(5596),g=d(8834),S=d(2629);class P{tracker;columnIndex=0;rowIndex=0;get rowCount(){return this.rowIndex+1}get rowspan(){const i=Math.max(...this.tracker);return i>1?this.rowCount+i-1:this.rowCount}positions;update(i,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(i),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(s=>this._trackTile(s))}_trackTile(i){const e=this._findMatchingGap(i.colspan);return this._markTilePosition(e,i),this.columnIndex=e+i.colspan,new w(this.rowIndex,e)}_findMatchingGap(i){let e=-1,s=-1;do{this.columnIndex+i>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(s=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),s=this._findGapEndIndex(e)))}while(s-e<i||0==s);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let i=0;i<this.tracker.length;i++)this.tracker[i]=Math.max(0,this.tracker[i]-1)}_findGapEndIndex(i){for(let e=i+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(i,e){for(let s=0;s<e.colspan;s++)this.tracker[i+s]=e.rowspan}}class w{row;col;constructor(i,e){this.row=i,this.col=e}}var t=d(3664),y=d(2615),r=d(2466);let u=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=t.$C({type:o});static \u0275inj=y.G2t({imports:[r.y,r.y]})}return o})();var f=d(7847),U=d(1577);const C=["*"],E=new y.nKC("MAT_GRID_LIST");let R=(()=>{class o{_element=(0,y.WQX)(t.aKT);_gridList=(0,y.WQX)(E,{optional:!0});_rowspan=1;_colspan=1;constructor(){}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round((0,f.OE)(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round((0,f.OE)(e))}_setStyle(e,s){this._element.nativeElement.style[e]=s}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=t.VBU({type:o,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(s,c){2&s&&t.BMQ("rowspan",c.rowspan)("colspan",c.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:C,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(s,c){1&s&&(t.NAR(),t.rj2(0,"div",0),t.SdG(1),t.eux())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0})}return o})();const L=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class T{_gutterSize;_rows=0;_rowspan=0;_cols;_direction;init(i,e,s,c){this._gutterSize=A(i),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=s,this._direction=c}getBaseTileSize(i,e){return`(${i}% - (${this._gutterSize} * ${e}))`}getTilePosition(i,e){return 0===e?"0":v(`(${i} + ${this._gutterSize}) * ${e}`)}getTileSize(i,e){return`(${i} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(i,e,s){let c=100/this._cols,h=(this._cols-1)/this._cols;this.setColStyles(i,s,c,h),this.setRowStyles(i,e,c,h)}setColStyles(i,e,s,c){let h=this.getBaseTileSize(s,c);i._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(h,e)),i._setStyle("width",v(this.getTileSize(h,i.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(i){return`${this._rowspan} * ${this.getTileSize(i,1)}`}getComputedHeight(){return null}}class j extends T{fixedRowHeight;constructor(i){super(),this.fixedRowHeight=i}init(i,e,s,c){super.init(i,e,s,c),this.fixedRowHeight=A(this.fixedRowHeight),L.test(this.fixedRowHeight)}setRowStyles(i,e){i._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),i._setStyle("height",v(this.getTileSize(this.fixedRowHeight,i.rowspan)))}getComputedHeight(){return["height",v(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(i){i._setListStyle(["height",null]),i._tiles&&i._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class B extends T{rowHeightRatio;baseTileHeight;constructor(i){super(),this._parseRatio(i)}setRowStyles(i,e,s,c){this.baseTileHeight=this.getBaseTileSize(s/this.rowHeightRatio,c),i._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),i._setStyle("paddingTop",v(this.getTileSize(this.baseTileHeight,i.rowspan)))}getComputedHeight(){return["paddingBottom",v(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(i){i._setListStyle(["paddingBottom",null]),i._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(i){const e=i.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class z extends T{setRowStyles(i,e){let h=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);i._setStyle("top",this.getTilePosition(h,e)),i._setStyle("height",v(this.getTileSize(h,i.rowspan)))}reset(i){i._tiles&&i._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function v(o){return`calc(${o})`}function A(o){return o.match(/([A-Za-z%]+)$/)?o:`${o}px`}let G=(()=>{class o{_element=(0,y.WQX)(t.aKT);_dir=(0,y.WQX)(U.dS,{optional:!0});_cols;_tileCoordinator;_rowHeight;_gutter="1px";_tileStyler;_tiles;constructor(){}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round((0,f.OE)(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const s=`${e??""}`;s!==this._rowHeight&&(this._rowHeight=s,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new z:e&&e.indexOf(":")>-1?new B(e):new j(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new P);const e=this._tileCoordinator,s=this._tiles.filter(h=>!h._gridList||h._gridList===this),c=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,s),this._tileStyler.init(this.gutterSize,e,this.cols,c),s.forEach((h,_)=>{const I=e.positions[_];this._tileStyler.setStyle(h,I.row,I.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=t.VBU({type:o,selectors:[["mat-grid-list"]],contentQueries:function(s,c,h){if(1&s&&t.wni(h,R,5),2&s){let _;t.mGM(_=t.lsd())&&(c._tiles=_)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(s,c){2&s&&t.BMQ("cols",c.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[t.Jv_([{provide:E,useExisting:o}])],ngContentSelectors:C,decls:2,vars:0,template:function(s,c){1&s&&(t.NAR(),t.rj2(0,"div"),t.SdG(1),t.eux())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0})}return o})(),H=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=t.$C({type:o});static \u0275inj=y.G2t({imports:[u,r.y,u,r.y]})}return o})();var $=d(8018),O=d(8132),W=d(1413),D=d(6977),K=d(4796),Q=d(9885),V=d(7989),J=d(8822);let N=(()=>{var o;class i{constructor(s,c,h,_){this.authService=s,this.userService=c,this.postsService=h,this.snackBar=_,this.currentUser=null,this.stats={posts:0,followers:0,following:0,likes:0,comments:0},this.recentPosts=[],this.loading=!1,this.destroy$=new W.B}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.loadStats(),this.loadRecentPosts()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadStats(){this.currentUser&&this.userService.getUserStats(this.currentUser.id).pipe((0,D.Q)(this.destroy$)).subscribe({next:s=>{this.stats=s},error:s=>{console.error("Error loading user stats:",s),this.snackBar.open("Error loading user statistics","Close",{duration:3e3})}})}loadRecentPosts(){this.currentUser&&(this.loading=!0,this.postsService.getUserPosts(this.currentUser.id,0,5).pipe((0,D.Q)(this.destroy$)).subscribe({next:s=>{this.recentPosts=s.posts,this.loading=!1},error:s=>{console.error("Error loading recent posts:",s),this.loading=!1,this.snackBar.open("Error loading recent posts","Close",{duration:3e3})}}))}static#t=o=()=>(this.\u0275fac=function(c){return new(c||i)(t.rXU(K.u),t.rXU(Q.D),t.rXU(V.v),t.rXU(J.UG))},this.\u0275cmp=t.VBU({type:i,selectors:[["app-dashboard"]],decls:72,vars:34,consts:[[1,"dashboard-container"],[1,"welcome-section"],["cols","2","rowHeight","200px","gutterSize","16px",1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"quick-actions"],[1,"action-buttons"],["mat-raised-button","","color","primary","routerLink","/posts/create"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(c,h){1&c&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.j41(8,"mat-grid-list",2)(9,"mat-grid-tile")(10,"mat-card",3)(11,"mat-card-content")(12,"div",4)(13,"mat-icon"),t.EFF(14,"article"),t.k0s()(),t.j41(15,"div",5)(16,"h3"),t.EFF(17),t.k0s(),t.j41(18,"p"),t.EFF(19),t.nI1(20,"translate"),t.k0s()()()()(),t.j41(21,"mat-grid-tile")(22,"mat-card",3)(23,"mat-card-content")(24,"div",4)(25,"mat-icon"),t.EFF(26,"people"),t.k0s()(),t.j41(27,"div",5)(28,"h3"),t.EFF(29),t.k0s(),t.j41(30,"p"),t.EFF(31),t.nI1(32,"translate"),t.k0s()()()()(),t.j41(33,"mat-grid-tile")(34,"mat-card",3)(35,"mat-card-content")(36,"div",4)(37,"mat-icon"),t.EFF(38,"person_add"),t.k0s()(),t.j41(39,"div",5)(40,"h3"),t.EFF(41),t.k0s(),t.j41(42,"p"),t.EFF(43),t.nI1(44,"translate"),t.k0s()()()()(),t.j41(45,"mat-grid-tile")(46,"mat-card",3)(47,"mat-card-content")(48,"div",4)(49,"mat-icon"),t.EFF(50,"favorite"),t.k0s()(),t.j41(51,"div",5)(52,"h3"),t.EFF(53),t.k0s(),t.j41(54,"p"),t.EFF(55),t.nI1(56,"translate"),t.k0s()()()()()(),t.j41(57,"div",6)(58,"h2"),t.EFF(59),t.nI1(60,"translate"),t.k0s(),t.j41(61,"div",7)(62,"button",8)(63,"mat-icon"),t.EFF(64,"add"),t.k0s(),t.EFF(65),t.nI1(66,"translate"),t.k0s(),t.j41(67,"button",9)(68,"mat-icon"),t.EFF(69,"person"),t.k0s(),t.EFF(70),t.nI1(71,"translate"),t.k0s()()()()),2&c&&(t.R7$(3),t.Lme("",t.bMT(4,16,"DASHBOARD.WELCOME"),", ",null==h.currentUser?null:h.currentUser.firstName,"!"),t.R7$(3),t.JRh(t.bMT(7,18,"DASHBOARD.SUBTITLE")),t.R7$(11),t.JRh(h.stats.posts),t.R7$(2),t.JRh(t.bMT(20,20,"DASHBOARD.POSTS")),t.R7$(10),t.JRh(h.stats.followers),t.R7$(2),t.JRh(t.bMT(32,22,"DASHBOARD.FOLLOWERS")),t.R7$(10),t.JRh(h.stats.following),t.R7$(2),t.JRh(t.bMT(44,24,"DASHBOARD.FOLLOWING")),t.R7$(10),t.JRh(h.stats.likes),t.R7$(2),t.JRh(t.bMT(56,26,"DASHBOARD.LIKES")),t.R7$(4),t.JRh(t.bMT(60,28,"DASHBOARD.QUICK_ACTIONS")),t.R7$(6),t.SpI(" ",t.bMT(66,30,"DASHBOARD.CREATE_POST")," "),t.R7$(2),t.Y8G("routerLink",t.VkB("/profile/",null==h.currentUser?null:h.currentUser.id)),t.R7$(3),t.SpI(" ",t.bMT(71,32,"DASHBOARD.VIEW_PROFILE")," "))},dependencies:[m.MD,p.Hu,p.RN,p.m2,g.Hl,g.$z,S.m_,S.An,H,G,R,$.h,O.iI,O.Wk,$.D9],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:600;color:#333;margin-bottom:8px}.welcome-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#666}.stats-grid[_ngcontent-%COMP%]{margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;padding:24px}.stat-icon[_ngcontent-%COMP%]{margin-right:16px}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#667eea}.stat-content[_ngcontent-%COMP%]{text-align:center}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#333;margin:0 0 8px}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin:0}.quick-actions[_ngcontent-%COMP%]{text-align:center}.quick-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;margin-bottom:24px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:1rem;font-weight:500}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:16px}[dir=rtl][_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:16px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.stats-grid[_ngcontent-%COMP%]{cols:1}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;max-width:300px}}"]}))}return o(),i})()},7989:(b,M,d)=>{d.d(M,{v:()=>w});var m=d(9330),p=d(4412),g=d(8141),S=d(2615),P=d(4796);let w=(()=>{var x;class t{constructor(r,n){this.http=r,this.authService=n,this.API_BASE_URL="https://localhost:5002/api",this.postsSubject=new p.t([]),this.currentPostSubject=new p.t(null),this.posts$=this.postsSubject.asObservable(),this.currentPost$=this.currentPostSubject.asObservable()}getPosts(r=0,n=10,a){let l=(new m.Nl).set("page",r.toString()).set("pageSize",n.toString());return a&&(a.category&&(l=l.set("category",a.category)),a.tags&&a.tags.length>0&&(l=l.set("tags",a.tags.join(","))),a.authorId&&(l=l.set("authorId",a.authorId)),void 0!==a.isPublished&&(l=l.set("isPublished",a.isPublished.toString())),a.searchTerm&&(l=l.set("searchTerm",a.searchTerm)),a.sortBy&&(l=l.set("sortBy",a.sortBy)),a.sortOrder&&(l=l.set("sortOrder",a.sortOrder))),this.http.get(`${this.API_BASE_URL}/posts`,{params:l}).pipe((0,g.M)(u=>{this.postsSubject.next(u.posts)}))}getPost(r){return this.http.get(`${this.API_BASE_URL}/posts/${r}`).pipe((0,g.M)(n=>{this.currentPostSubject.next(n)}))}createPost(r){return this.http.post(`${this.API_BASE_URL}/posts`,r).pipe((0,g.M)(n=>{this.postsSubject.next([n,...this.postsSubject.value])}))}updatePost(r,n){return this.http.put(`${this.API_BASE_URL}/posts/${r}`,n).pipe((0,g.M)(a=>{const u=this.postsSubject.value.map(f=>f.id===r?a:f);this.postsSubject.next(u),this.currentPostSubject.value?.id===r&&this.currentPostSubject.next(a)}))}deletePost(r){return this.http.delete(`${this.API_BASE_URL}/posts/${r}`).pipe((0,g.M)(()=>{const a=this.postsSubject.value.filter(l=>l.id!==r);this.postsSubject.next(a),this.currentPostSubject.value?.id===r&&this.currentPostSubject.next(null)}))}toggleLike(r){return this.http.post(`${this.API_BASE_URL}/posts/${r}/like`,{}).pipe((0,g.M)(n=>{const l=this.postsSubject.value.map(u=>u.id===r?n:u);this.postsSubject.next(l),this.currentPostSubject.value?.id===r&&this.currentPostSubject.next(n)}))}getUserPosts(r,n=0,a=10){const l=(new m.Nl).set("page",n.toString()).set("pageSize",a.toString());return this.http.get(`${this.API_BASE_URL}/users/${r}/posts`,{params:l})}getTrendingPosts(r=10){return this.http.get(`${this.API_BASE_URL}/posts/trending`,{params:(new m.Nl).set("limit",r.toString())})}searchPosts(r,n=0,a=10){const l=(new m.Nl).set("q",r).set("page",n.toString()).set("pageSize",a.toString());return this.http.get(`${this.API_BASE_URL}/posts/search`,{params:l})}clearCurrentPost(){this.currentPostSubject.next(null)}getCachedPosts(){return this.postsSubject.value}getCachedCurrentPost(){return this.currentPostSubject.value}static#t=x=()=>(this.\u0275fac=function(n){return new(n||t)(S.KVO(m.Qq),S.KVO(P.u))},this.\u0275prov=S.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}))}return x(),t})()},9885:(b,M,d)=>{d.d(M,{D:()=>w});var m=d(4412),p=d(8141),g=d(2615),S=d(9330),P=d(4796);let w=(()=>{var x;class t{constructor(r,n){this.http=r,this.authService=n,this.API_BASE_URL="https://localhost:5002/api",this.userProfileSubject=new m.t(null),this.userStatsSubject=new m.t(null),this.userProfile$=this.userProfileSubject.asObservable(),this.userStats$=this.userStatsSubject.asObservable()}getUserProfile(r){return this.http.get(`${this.API_BASE_URL}/users/${r}`).pipe((0,p.M)(n=>{n.id===this.authService.getCurrentUser()?.id&&this.userProfileSubject.next(n)}))}getCurrentUserProfile(){const r=this.authService.getCurrentUser();if(!r)throw new Error("No authenticated user");return this.getUserProfile(r.id)}updateProfile(r,n){return this.http.put(`${this.API_BASE_URL}/users/${r}`,n).pipe((0,p.M)(a=>{a.id===this.authService.getCurrentUser()?.id&&(this.userProfileSubject.next(a),this.authService.updateUserProfile(a))}))}changePassword(r,n){return this.http.put(`${this.API_BASE_URL}/users/${r}/password`,n)}uploadProfilePicture(r,n){const a=new FormData;return a.append("profilePicture",n),this.http.post(`${this.API_BASE_URL}/users/${r}/profile-picture`,a).pipe((0,p.M)(l=>{const u=this.userProfileSubject.value;if(u&&u.id===r){const f={...u,profilePicture:l.profilePictureUrl};this.userProfileSubject.next(f),this.authService.updateUserProfile(f)}}))}getUserStats(r){return this.http.get(`${this.API_BASE_URL}/users/${r}/stats`).pipe((0,p.M)(n=>{r===this.authService.getCurrentUser()?.id&&this.userStatsSubject.next(n)}))}followUser(r,n){return this.http.post(`${this.API_BASE_URL}/users/${r}/follow/${n}`,{})}unfollowUser(r,n){return this.http.delete(`${this.API_BASE_URL}/users/${r}/follow/${n}`)}getUserFollowers(r,n=0,a=20){const l=new URLSearchParams({page:n.toString(),pageSize:a.toString()});return this.http.get(`${this.API_BASE_URL}/users/${r}/followers?${l}`)}getUserFollowing(r,n=0,a=20){const l=new URLSearchParams({page:n.toString(),pageSize:a.toString()});return this.http.get(`${this.API_BASE_URL}/users/${r}/following?${l}`)}searchUsers(r,n=0,a=20){const l=new URLSearchParams({q:r,page:n.toString(),pageSize:a.toString()});return this.http.get(`${this.API_BASE_URL}/users/search?${l}`)}getSuggestedUsers(r,n=10){return this.http.get(`${this.API_BASE_URL}/users/${r}/suggestions`,{params:{limit:n.toString()}})}isFollowing(r,n){return this.http.get(`${this.API_BASE_URL}/users/${r}/following/${n}/check`)}getCachedUserProfile(){return this.userProfileSubject.value}getCachedUserStats(){return this.userStatsSubject.value}clearUserData(){this.userProfileSubject.next(null),this.userStatsSubject.next(null)}static#t=x=()=>(this.\u0275fac=function(n){return new(n||t)(g.KVO(S.Qq),g.KVO(P.u))},this.\u0275prov=g.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}))}return x(),t})()}}]);