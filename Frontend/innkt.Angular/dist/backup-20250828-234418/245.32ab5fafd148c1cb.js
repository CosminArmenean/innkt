"use strict";(self.webpackChunkinnkt=self.webpackChunkinnkt||[]).push([[245],{1245:($,p,n)=>{n.r(p),n.d(p,{ProfileComponent:()=>w});var c=n(2200),l=n(5596),_=n(8834),u=n(2629),d=n(6850),m=n(6471),P=n(9183),f=n(8018),O=n(1413),a=n(6977),h=n(2615),t=n(3664),M=n(537),C=n(4796),E=n(9885),v=n(7989),x=n(8822);function F(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",21)(1,"button",22),t.bIt("click",function(){h.eBV(e);const s=t.XpG(2);return h.Njj(s.followUser())}),t.j41(2,"mat-icon"),t.EFF(3,"person_add"),t.k0s(),t.EFF(4),t.nI1(5,"translate"),t.k0s()()}2&o&&(t.R7$(4),t.SpI(" ",t.bMT(5,1,"PROFILE.FOLLOW")," "))}function R(o,i){if(1&o&&(t.j41(0,"mat-card",23)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s(),t.j41(4,"mat-card-subtitle"),t.EFF(5),t.nI1(6,"date"),t.k0s()(),t.j41(7,"mat-card-content")(8,"p"),t.EFF(9),t.k0s()()()),2&o){const e=i.$implicit;t.R7$(3),t.JRh(e.title),t.R7$(2),t.JRh(t.i5U(6,3,e.createdAt,"medium")),t.R7$(4),t.JRh(e.content)}}function I(o,i){if(1&o&&(t.j41(0,"mat-card",24)(1,"div",25),t.nrm(2,"img",26),t.j41(3,"div",27)(4,"h3"),t.EFF(5),t.k0s()()()()),2&o){const e=i.$implicit;t.R7$(2),t.Y8G("src",e.profilePicture||"assets/default-avatar.jpg",t.B4B)("alt",e.firstName+" "+e.lastName),t.R7$(3),t.Lme("",e.firstName," ",e.lastName)}}function b(o,i){if(1&o&&(t.j41(0,"mat-card",24)(1,"div",25),t.nrm(2,"img",26),t.j41(3,"div",27)(4,"h3"),t.EFF(5),t.k0s()()()()),2&o){const e=i.$implicit;t.R7$(2),t.Y8G("src",e.profilePicture||"assets/default-avatar.jpg",t.B4B)("alt",e.firstName+" "+e.lastName),t.R7$(3),t.Lme("",e.firstName," ",e.lastName)}}function U(o,i){if(1&o&&(t.j41(0,"div",1)(1,"div",2)(2,"mat-card",3)(3,"div",4)(4,"div",5),t.nrm(5,"img",6),t.k0s()(),t.j41(6,"mat-card-content",7)(7,"h1"),t.EFF(8),t.k0s(),t.j41(9,"p",8),t.EFF(10),t.k0s(),t.j41(11,"p",9),t.EFF(12),t.nI1(13,"translate"),t.nI1(14,"date"),t.k0s(),t.j41(15,"div",10)(16,"div",11)(17,"span",12),t.EFF(18),t.k0s(),t.j41(19,"span",13),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.j41(22,"div",11)(23,"span",12),t.EFF(24),t.k0s(),t.j41(25,"span",13),t.EFF(26),t.nI1(27,"translate"),t.k0s()(),t.j41(28,"div",11)(29,"span",12),t.EFF(30),t.k0s(),t.j41(31,"span",13),t.EFF(32),t.nI1(33,"translate"),t.k0s()()(),t.DNE(34,F,6,3,"div",14),t.k0s()()(),t.j41(35,"div",15)(36,"mat-tab-group")(37,"mat-tab",16),t.nI1(38,"translate"),t.j41(39,"div",17),t.DNE(40,R,10,6,"mat-card",18),t.k0s()(),t.j41(41,"mat-tab",16),t.nI1(42,"translate"),t.j41(43,"div",19),t.DNE(44,I,6,4,"mat-card",20),t.k0s()(),t.j41(45,"mat-tab",16),t.nI1(46,"translate"),t.j41(47,"div",19),t.DNE(48,b,6,4,"mat-card",20),t.k0s()()()()()),2&o){const e=t.XpG();t.R7$(5),t.Y8G("src",e.user.profilePicture,t.B4B)("alt",e.user.firstName+" "+e.user.lastName),t.R7$(3),t.Lme("",e.user.firstName," ",e.user.lastName),t.R7$(2),t.JRh(e.user.email),t.R7$(2),t.Lme("",t.bMT(13,20,"PROFILE.JOINED")," ",t.i5U(14,22,e.user.createdAt,"longDate")),t.R7$(6),t.JRh(e.posts.length),t.R7$(2),t.JRh(t.bMT(21,25,"PROFILE.POSTS")),t.R7$(4),t.JRh(e.followers.length),t.R7$(2),t.JRh(t.bMT(27,27,"PROFILE.FOLLOWERS")),t.R7$(4),t.JRh(e.following.length),t.R7$(2),t.JRh(t.bMT(33,29,"PROFILE.FOLLOWING")),t.R7$(2),t.Y8G("ngIf",!e.isOwnProfile),t.R7$(3),t.Y8G("label",t.bMT(38,31,"PROFILE.POSTS")),t.R7$(3),t.Y8G("ngForOf",e.posts),t.R7$(),t.Y8G("label",t.bMT(42,33,"PROFILE.FOLLOWERS")),t.R7$(3),t.Y8G("ngForOf",e.followers),t.R7$(),t.Y8G("label",t.bMT(46,35,"PROFILE.FOLLOWING")),t.R7$(3),t.Y8G("ngForOf",e.following)}}let w=(()=>{var o;class i{constructor(r,s,g,D,L){this.route=r,this.authService=s,this.userService=g,this.postsService=D,this.snackBar=L,this.userId="",this.user=null,this.isOwnProfile=!1,this.posts=[],this.followers=[],this.following=[],this.userStats=null,this.loading=!1,this.isFollowing=!1,this.destroy$=new O.B}ngOnInit(){this.route.params.subscribe(r=>{this.userId=r.id,this.loadProfile(),this.loadPosts(),this.loadFollowers(),this.loadFollowing(),this.checkFollowStatus()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProfile(){this.loading=!0,this.userService.getUserProfile(this.userId).pipe((0,a.Q)(this.destroy$)).subscribe({next:r=>{this.user=r,this.isOwnProfile=this.userId===this.authService.getCurrentUser()?.id,this.loadUserStats()},error:r=>{console.error("Error loading profile:",r),this.snackBar.open("Error loading profile","Close",{duration:3e3})}})}loadUserStats(){this.userService.getUserStats(this.userId).pipe((0,a.Q)(this.destroy$)).subscribe({next:r=>{this.userStats=r},error:r=>{console.error("Error loading user stats:",r)}})}loadPosts(){this.postsService.getUserPosts(this.userId,0,10).pipe((0,a.Q)(this.destroy$)).subscribe({next:r=>{this.posts=r.posts},error:r=>{console.error("Error loading posts:",r),this.snackBar.open("Error loading posts","Close",{duration:3e3})}})}loadFollowers(){this.userService.getUserFollowers(this.userId,0,20).pipe((0,a.Q)(this.destroy$)).subscribe({next:r=>{this.followers=r.users},error:r=>{console.error("Error loading followers:",r)}})}loadFollowing(){this.userService.getUserFollowing(this.userId,0,20).pipe((0,a.Q)(this.destroy$)).subscribe({next:r=>{this.following=r.users},error:r=>{console.error("Error loading following:",r)}})}checkFollowStatus(){if(!this.isOwnProfile&&this.authService.getCurrentUser()){const r=this.authService.getCurrentUser().id;this.userService.isFollowing(r,this.userId).pipe((0,a.Q)(this.destroy$)).subscribe({next:s=>{this.isFollowing=s},error:s=>{console.error("Error checking follow status:",s)}})}}followUser(){if(!this.authService.getCurrentUser())return void this.snackBar.open("Please log in to follow users","Close",{duration:3e3});const r=this.authService.getCurrentUser().id;this.userService.followUser(r,this.userId).pipe((0,a.Q)(this.destroy$)).subscribe({next:()=>{this.isFollowing=!0,this.snackBar.open("Successfully followed user!","Close",{duration:2e3}),this.loadFollowers()},error:s=>{console.error("Error following user:",s),this.snackBar.open("Error following user","Close",{duration:3e3})}})}unfollowUser(){if(!this.authService.getCurrentUser())return void this.snackBar.open("Please log in to unfollow users","Close",{duration:3e3});const r=this.authService.getCurrentUser().id;this.userService.unfollowUser(r,this.userId).pipe((0,a.Q)(this.destroy$)).subscribe({next:()=>{this.isFollowing=!1,this.snackBar.open("Successfully unfollowed user!","Close",{duration:2e3}),this.loadFollowers()},error:s=>{console.error("Error unfollowing user:",s),this.snackBar.open("Error unfollowing user","Close",{duration:3e3})}})}static#t=o=()=>(this.\u0275fac=function(s){return new(s||i)(t.rXU(M.nX),t.rXU(C.u),t.rXU(E.D),t.rXU(v.v),t.rXU(x.UG))},this.\u0275cmp=t.VBU({type:i,selectors:[["app-profile"]],decls:1,vars:1,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"profile-header"],[1,"profile-card"],[1,"profile-cover"],[1,"profile-avatar"],[3,"src","alt"],[1,"profile-info"],[1,"profile-email"],[1,"profile-joined"],[1,"profile-stats"],[1,"stat"],[1,"stat-number"],[1,"stat-label"],["class","profile-actions",4,"ngIf"],[1,"profile-content"],[3,"label"],[1,"posts-grid"],["class","post-card",4,"ngFor","ngForOf"],[1,"users-list"],["class","user-card",4,"ngFor","ngForOf"],[1,"profile-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"post-card"],[1,"user-card"],[1,"user-info"],[1,"user-avatar",3,"src","alt"],[1,"user-details"]],template:function(s,g){1&s&&t.DNE(0,U,49,37,"div",0),2&s&&t.Y8G("ngIf",g.user)},dependencies:[c.MD,c.Sq,c.bT,l.Hu,l.RN,l.m2,l.MM,l.Lc,l.dh,_.Hl,_.$z,u.m_,u.An,d.RI,d.mq,d.T8,m.YN,P.D6,f.h,c.vh,f.D9],styles:[".profile-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.profile-header[_ngcontent-%COMP%]{margin-bottom:32px}.profile-card[_ngcontent-%COMP%]{border-radius:16px;overflow:hidden;box-shadow:0 8px 32px #0000001a}.profile-cover[_ngcontent-%COMP%]{height:200px;background:linear-gradient(135deg,#667eea,#764ba2);position:relative}.profile-avatar[_ngcontent-%COMP%]{position:absolute;bottom:-50px;left:50%;transform:translate(-50%)}.profile-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;border:4px solid white;box-shadow:0 4px 16px #0003}.profile-info[_ngcontent-%COMP%]{padding:60px 24px 24px;text-align:center}.profile-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:#333;margin:0 0 8px}.profile-info[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{color:#666;margin:0 0 8px}.profile-info[_ngcontent-%COMP%]   .profile-joined[_ngcontent-%COMP%]{color:#999;font-size:.9rem;margin:0 0 24px}.profile-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:32px;margin-bottom:24px}.profile-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{text-align:center}.profile-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#667eea}.profile-stats[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:1rem;font-weight:500}.profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.profile-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-header{border-bottom:1px solid #e0e0e0}.posts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;padding:24px 0}.post-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 16px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026}.users-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;padding:24px 0}.user-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 16px #0000001a}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin-right:12px}.user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:#333}[dir=rtl][_ngcontent-%COMP%]   .profile-avatar[_ngcontent-%COMP%]{left:auto;right:50%;transform:translate(50%)}[dir=rtl][_ngcontent-%COMP%]   .profile-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}[dir=rtl][_ngcontent-%COMP%]   .user-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{margin-right:0;margin-left:12px}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:16px}.profile-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.profile-stats[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.posts-grid[_ngcontent-%COMP%], .users-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}))}return o(),i})()}}]);